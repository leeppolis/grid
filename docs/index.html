<!DOCTYPE html>
<html>
<head>
  <title>Griglia Immagine</title>
</head>
<body>
  <h1>Carica immagine e genera griglia</h1>
  <input type="file" id="imageInput"><br>
  <label>Colore: 
    <select id="colore">
      <option value="bianco">Bianco</option>
      <option value="magenta">Magenta</option>
      <option value="nero">Nero</option>
      <option value="ciano">Ciano</option>
    </select>
  </label><br>
  <label>Numero di quadrati (orizzontale): <input type="number" id="n" min="1" max="100"></label><br>
  <button onclick="invia()">Invia</button>

  <h2>Risultato:</h2>
  <img id="outputImage" style="max-width: 600px;">

  <script>
    async function invia() {
      const imageInput = document.getElementById('imageInput');
      const colore = document.getElementById('colore').value;
      const n = document.getElementById('n').value;

      const formData = new FormData();
      formData.append('image', imageInput.files[0]);
      formData.append('colore', colore);
      formData.append('n', n);

      const response = await fetch('https://grid.koolmoe.at/grid', {
        method: 'POST',
        mode: "cors",
        body: formData
      });

      if (response.ok) {
        const blob = await response.blob();
        document.getElementById('outputImage').src = URL.createObjectURL(blob);
      } else {
        alert('Errore nella generazione della griglia');
      }
    }
  </script>
</body>
</html>